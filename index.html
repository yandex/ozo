<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OZO 「お象」: ozo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OZO 「お象」
   </div>
   <div id="projectbrief">Boost.Asio and libpq based asynchronous PostgreSQL unofficial header-only C++17 client library.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ozo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://travis-ci.org/yandex/ozo"><img src="https://travis-ci.org/yandex/ozo.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/gh/yandex/ozo"><img src="https://codecov.io/gh/yandex/ozo/branch/master/graph/badge.svg" alt="codecov" style="pointer-events: none;" class="inline"/></a></p>
<h1>What's this</h1>
<p>OZO is a C++17 library for asyncronous communication with PostgreSQL DBMS. The library leverages the power of template metaprogramming, providing convenient mapping from C++ types to SQL along with rich query building possibilities. OZO supports different concurrency paradigms (callbacks, futures, coroutines), using Boost.Asio under the hood. Low-level communication with PostgreSQL server is done via libpq. All concepts in the library are designed to be easily extendable (even replaceable) by the user to simplify adaptation to specific project requirements.</p>
<h2>API</h2>
<p>Since the project is on early state of development it lacks of documentation. We understand the importance of good docs and are working hard on this problem. Complete documentation is on the way, but now:</p>
<ul>
<li>look at our brand new <a class="el" href="md_docs_howto.html">HOW TO</a>,</li>
<li>try our <a href="https://yandex.github.io/ozo/">generated from sources documentation</a> - it is under construction but readable,</li>
<li>learn more about main use-cases from <a href="tests/integration/request_integration.cpp">unit tests</a>,</li>
<li>See our <a href="https://youtu.be/-1zbaxuUsMA">C++Now'18 talk about OZO</a> with <a href="https://github.com/boostcon/cppnow_presentations_2018/blob/master/05-09-2018_wednesday/design_and_implementation_of_dbms_asynchronous_client_library__roman_siromakha__cppnow_05092018.pdf">presentation</a>.</li>
</ul>
<h1>Dependencies</h1>
<p>These things are needed:</p>
<ul>
<li><b>CMake</b> is used as build system</li>
<li><b>GCC</b> or <b>Clang</b> C++ compiler with C++17 support (tested with GCC 7.0, Clang 5.0 and Apple LLVM version 9.0.0)</li>
<li><b>Boost</b> &gt;= 1.66 with <code>BOOST_HANA_CONFIG_ENABLE_STRING_UDL</code> defined.</li>
<li><b>libpq</b> &gt;= 9.3</li>
<li>Ozo uses the <a href="https://github.com/elsid/resource_pool">resource_pool</a> library as a git submodule, so in case of using a package version, this dependency should be satisfied too.</li>
</ul>
<p>If you want to run integration tests and/or build inside Docker container:</p><ul>
<li><b>Docker</b> &gt;= 1.13.0</li>
<li><b>Docker Compose</b> &gt;= 1.10.0</li>
</ul>
<h1>Build</h1>
<p>The library is header-only, but if you want to build and run unit-tests you can do it as listed below.</p>
<h2>Build and run tests on custom environment</h2>
<p>First of all you need to satsfy requirements listed above. You can run tests using these commands.</p>
<div class="fragment"><div class="line">mkdir -p build</div>
<div class="line">cd build</div>
<div class="line">cmake .. -DOZO_BUILD_TESTS=ON</div>
<div class="line">make -j$(nproc)</div>
<div class="line">ctest -V</div>
</div><!-- fragment --><p>Or use <a href="scripts/build.sh">build.sh</a> which accepts folowing commands:</p>
<div class="fragment"><div class="line">scripts/build.sh help</div>
</div><!-- fragment --><p>prints help.</p>
<div class="fragment"><div class="line">scripts/build.sh &lt;compiler&gt; &lt;target&gt;</div>
</div><!-- fragment --><p>build and run tests with specified <b>compiler</b> and <b>target</b>, the <b>compiler</b> parameter can be:</p>
<ul>
<li><b>gcc</b> - for build with gcc,</li>
<li><b>clang</b> - for build with clang.</li>
</ul>
<p>The <b>target</b> parameter depends on <b>compiler</b>. For <b>gcc</b>:</p>
<ul>
<li><b>debug</b> - for debug build and tests</li>
<li><b>release</b> - for release build and tests</li>
<li><b>coverage</b> - for code coverage calculation</li>
</ul>
<p>For <b>clang</b>:</p>
<ul>
<li><b>debug</b> - for debug build and tests</li>
<li><b>release</b> - for release build and tests</li>
<li><b>asan</b> - for <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a> launch</li>
<li><b>ubsan</b> - for <a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviorSanitizer</a> launch</li>
<li><b>tsan</b> - for <a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a> launch</li>
</ul>
<div class="fragment"><div class="line">scripts/build.sh all</div>
</div><!-- fragment --><p>build all possible configuration.</p>
<div class="fragment"><div class="line">scripts/build.sh docs</div>
</div><!-- fragment --><p>generates documentation.</p>
<h2>Build and run tests on MacOS 10.X</h2>
<p>For MacOS the best way to satisfy minimum requirements is <a href="https://brew.sh/">brew</a></p>
<div class="fragment"><div class="line">brew install cmake boost libpq postresql</div>
</div><!-- fragment --><h2>Build and run tests within Docker</h2>
<p>To build code and run tests inside docker container:</p>
<div class="fragment"><div class="line">scripts/build.sh docker &lt;compiler&gt; &lt;target&gt;</div>
</div><!-- fragment --><p>To generate documentation using docker container:</p>
<div class="fragment"><div class="line">scripts/build.sh docker docs</div>
</div><!-- fragment --><h2>Test against a local postgres</h2>
<p>You can use <code>scripts/build.sh</code> but add <code>pg</code> first:</p>
<div class="fragment"><div class="line">scripts/build.sh pg &lt;compiler&gt; &lt;target&gt;</div>
</div><!-- fragment --><p>or if you want build code in docker:</p>
<div class="fragment"><div class="line">scripts/build.sh pg docker &lt;compiler&gt; &lt;target&gt;</div>
</div><!-- fragment --><p>This will attempt to launch postgres:alpine from your Docker registry. Or you can point ozo tests to a postgres of your choosing by setting these environment variables prior to building:</p>
<div class="fragment"><div class="line">export OZO_BUILD_PG_TESTS=ON</div>
<div class="line">export OZO_PG_TEST_CONNINFO=&#39;your conninfo (connection string)&#39;</div>
<div class="line"> </div>
<div class="line">scripts/build.sh gcc debug</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
